### 新一代的web应用

### 使用Ajax

### web页面-老式方法

对于传统的web页面和应用,每次用户点击页面上的某个部分时,浏览器都会向服务器发出一个请求,服务器在做出响应,返回一个完整的新页面,即使用户的web浏览器很聪明,知道对图像和层叠样式表之类的内容进行缓存,但是用户的浏览器和你的服务器之间还是存在着大量的来回通信,其后果就是用户不得不为这些完全页面刷新等待很长的时间

### 改进的web页面

通过使用Ajax,页面和应用只向服务器请求他们真正需要的东西,也就是页面中需要修改的部分,而且这也是服务器要提供的部分,这意味着通信量更少,更新更少,用户等待页面刷新的时间也更短

**`利用Ajax,浏览器只会发送和接收页面中需要修改的部分`**

基于Ajax,用户不必忍受页面闪烁,也不必承受长时间的等待,甚至在处理请求的同时,他们还可以继续使用页面,有时浏览器根本不必与服务器通信,Ajax使页面响应得更快

### Ajax是什么

Ajax采用一种新的方式使用原先已经存在的一些技术

Ajax并不是一个全新的技术,不像css或者javascript那样要求你从头学起,它也不是一组需要借助photoshop才能完成的图形图像技术,Ajax只是采用一种新的方式来考虑如何使用你可以能已经知道的一些技术来完成你已经在做的事情

### 那么怎么样才能让页面“Ajax
Ajax是设计和构建web页面的一种方法,可以使用web应用具有桌面应用的一样的交互性和响应式性,对你来说,这意味着什么?你可尽可能在客户的浏览器上完成处理,你的页面会发出异步请求,使用户可以继续工作而不是等待响应,另外只会更新页面上确实要改变的部分,最棒的是,Ajax页面是使用标准的internet技术构建的,有些技术你可能早已经该知道怎么使用了的
* XHTML
* 层叠样式表
* javascript
Ajax应用还使用了另外一些技术
* XMLHttpRequest
* XML&JSON
* DOM

异步请求:指在后台发生的一个请求,处理请求时用户可以继续完成它的工作

### 问题1,Ajax是不是代表Asynchronous javascript and XML?

可以把Ajax定义为一种构建web页面的方法,使之像桌面应用一样具有响应性和交互性

### 问题2：异步到底是什么意思？

在Ajax中,可以向服务器发出请求而无需等待响应,这就称为一个异步请求

### 问题3难道不是所有的web页面都是异步的?b,b比如：浏览器不就是在我查看页面的同时加载图片的?
浏览器确实是异步的,不过标准web页面却不是,通常,web页面需要从一个服务器端程序得到某些信息时,一切都会停滞不动,直到服务器响应为止,除非页面做出一个异步请求,这正是Ajax的关键

### 问题4，但是所有的Ajax页面都是使用XMLHttpRequest对象《是?
并非如此,大多数Ajax页面确实都使用XMLHttpRequest对象,但这并不是一个必要条件,实际上,很多被认为支持Ajax的应用更关心用户交互性和设计,而不是一个特定的编码技术

Ajax页面只是在必要的时候才与服务器通信,而且只传送服务器知道的东西

* 异步请求允许同时发生多件事情
* 只有web页面中需要修改的部分会得到更新
* 服务器向浏览器返回数据期间页面不是冻结的

### 使用Ajax能够给web页面提供一些什么样的好处?

利用异步请求,可以确保浏览器在后台工作,避免因完全页面刷新而中断用户的工作

1. 浏览器可以从服务器同时请求多项内容(只是在有些情况下如此,请求和响应的速度取决于服务器返回的内容,Ajax页面完全有可能比传统的页面还要慢)
2. 浏览器请求返回的速度会快得多
3. 只有页面中真正改变的部分得到更新
4. 会减少服务器数据流量(利用Ajax可以建立更小,更集中的请求,不过要当心,这也很容易导致建立更多的请求以至于增大数据流量,因为可能要异步的建立所有这些请求)
5. 用户可以在页面更新时同时继续工作
6. 有些改变无需与服务器往返通信就可以处理(在浏览器端完成处理可以使你的web应用更像是一个桌面应用)
7. 只有页面中真正改变的部分得到更新

### 问题1：刚开始你说Ajax尅改进web应用,现在你又说他会增加服务器数据流量,到底是怎么回事?
有时候这两种情况会同时存在,Ajax是一种能够建立请求并得到响应的方法,可以用来构建快速响应的web应用,但是在决定异步请求和常规同步请求中哪一个更好时,还必须灵活一些

### 问题2:我怎么知道什么时候使用Ajax和异步请求,而在哪些请求下不能使用?

这样来考虑,如果你希望在用户工作的同时继续做一些处理,可能就需要一个异步请求,但是,如果你的用户在继续操作之前需要从你的应用得到某些信息或者得到一个响应,那就需要让用户等待,那么往往意味着需要一个同步的请求

### 使用Ajax改造传统网站的5个步骤

完成这些工作之后,页面将不再需要重新加载,用户点击缩略图像是,只有那些确实需要改变的部分会得到更新

1. ### 修改XHTML web页面
   需要包含接下来要编写的javascript文件,并增加一些div和id,使javascript脚本能够查找和处理web页面中的不同的部分

2. 编写一个函数的初始化页面
   首次加载目录页面时,需要运行一些javascript脚本来建立这些图像,准备好一个请求对象,并确保页面已经准备就绪
3. 编写一个函数创建请求对象

   我们需要一个途径与服务器通信,并得到Rob商品中每个纪念品的详细信息,为此将编写一个函数创建一个请求对象,以便我们的代码于服务器通信,这个函数名为createRequest()只要点击一个缩略图就可以使用这个函数启动一个新的请求

4. 从服务器得到一个商品的详细信息
   我们将在getDetails()中向Bob的服务器发送一个请求,告诉浏览器当服务器响应时该怎么做
5. 显示商品详情信息
   可以在getDetails()中改变要显示的图像,然后需要另一个函数displayDetails()在服务器对请求作出响应时更新商品的描述信息
5. 显示商品详情信息
   可以在getDetails()中改变要显示的图像,然后需要另一个函数displayDetails()在服务器对请求作出响应时更新商品的描述信息

异步应用使用一个javascript对象发送请求,而不是通过表单提交

### 服务器总是针对Ajax请求返回数据

在一个传统的web应用中,服务器对来自浏览器请求作出响应时,总是会发回一个新页面,新页面到达时,浏览器会扔掉所有已显示的内容(包括用户已填入的域)

### Ajax服务器端交互
在一个Ajax应用当中,服务器可能返回一个完整的页面或部分页面,或者只是返回将在web页面上格式化并显示的一些信息,浏览器只完成你的javascript所要求的工作

### Ajax是服务器无关的

Ajax不要求任何特定的服务器技术,可以使用Active Server Pages(ASP) php或者你需要和可以使用的任何技术,实际上,没有必要深入到服务器端技术的细节当中,因为它对如何构建Ajax应用没有任何影响

### 您能解释一些什么是回调函数?

回调函数式就是另外某件事结束时执行的一个函数, 在Ajax中,回调函数就是服务器对一个请求对象做出响应时调用的函数,浏览器会在某个时刻回调这个函数

### 那就是说,当服务器结束对一个请求的处理时就会执行一个回调函数,对?

不是这样的,实际上每次服务器响应请求时就会由浏览器调用回调函数,即使此时服务器并没有完全处理完请求,大多数服务器都会做出多次响应,指示接收到请求,或者正在处理请求,或者已经处理完请求

### 就是因为这个原因，这个请求属性才被命名为onreadydtatechange?

完全正确,每次服务器响应一个请求时,它会把请求对象的readystate属性设置为一个不同的值,所以我们要特别注意这个属性,来确定服务器何时处理完我们发送给他的请求

### 使用回调函数处理服务器返回的数据

如何显示每个商品的文本描述呢,下面假设服务器会把商品的详细信息作为预定格式的文本发送到请求对象的responseText属性中,这样一来,我们只需要得到这个数据并显示

我们的回调函数displayDetails()需要找到将包含详细信息的XHTML元素,然后将其innerHTML属性设置为服务器返回的值

### 这么说来,处理完请求时服务器会调用displayDetails

不对,实际上要由浏览器调用这个函数,服务器所做的知识更新请求对象的readyState属性,每次这个属性发生变化时,浏览器就会调用onreadystatechange属性中指定的函数

### 问readyState属性是什么?

这是一个数,指示服务器处理进行到哪个阶段,初始值为0，服务器处理完一个请求时,这个属性的值将是4

### 为什么每次都必须检查呢?

因为每次准备状态改变时浏览器都会运行回调函数,由于服务器接收到请求时会把这个值设置为1,而在处理请求时有可能把这个值设置为3或3,所以除非readystate等于4,否则无法确定服务器是否处理完请求

### 那么status属性呢?

这是http状态码,如404时就代表禁止访问,200代表成功,对请求对象做任何处理之前一定要确保状态码为200

### 使用innerHTML是不是不太好？

确实如此,不过有时这个属性确实很有效

### 传统web页面与Ajax应用区别

1. 要花很长的时间加载,因为每次点击时浏览器都必须显示整个页面
2. 感觉页面毫无反应,因为用户都必须显示整个页面
3. 感觉页面毫无反应,因为用户必须等待所有这些页面刷新

### Ajax应用

1. 只改变了页面中需要更新的部分
2. 在后台异步地加载图像和描述信息的同时,允许用户继续查看页面
3. 不要求用户拥有超高速的网络连接才能使用它的网站


